/*!
 * Sol
 * Copyright (c) 2012 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 *
 * @website https://github.com/logicalparadox/sol/
 */
!function(e,t,n){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?module.exports=n(e,t):typeof define=="function"&&typeof define.amd=="object"?define(n):t[e]=n(e,t)}("Sol",this,function(e,t){function r(e,t){if(e&&t)for(var n in t)e[n]=t[n];return e}function s(e,t){this.opts=t||{},this._data=Object.create(null);for(var n in e)this.set(n,e[n])}var n={},i={};return i.ASC=function(e,t){return e.value-t.value},i.DESC=function(e,t){return t.value-e.value},i.KASC=function(e,t){var n=e.key.toLowerCase(),r=t.key.toLowerCase();return n<r?-1:n>r?1:0},i.KDESC=function(e,t){var n=e.key.toLowerCase(),r=t.key.toLowerCase();return n<r?1:n>r?-1:0},n.exports=s,s.version="0.3.0",Object.defineProperty(s.prototype,"length",{get:function(){return this.keys.length}}),Object.defineProperty(s.prototype,"keys",{get:function(){var e=[],t;for(var n in this._data)t=this._data[n],"undefined"!=typeof t&&e.push(n);return e}}),Object.defineProperty(s.prototype,"values",{get:function(){var e=[],t;for(var n in this._data)t=this._data[n],"undefined"!=typeof t&&e.push(t);return e}}),s.prototype.get=function(e){return this._data[e]},s.prototype.has=function(e){var t=this._data[e];return!!t},s.prototype.set=function(e,t){this._data[e]=t},s.prototype.del=function(e){this._data[e]=undefined},s.prototype.clone=function(){var e=new this.constructor(null,this.opts);return r(e._data,this._data),e},s.prototype.at=function(e){var t=this.keys[e];return this._data[t]},s.prototype.index=function(e){return this.keys.indexOf(e)},s.prototype.each=s.prototype.foEach=function(e,t){var n=0;t=t||this;for(var r in this._data)e.call(t,this._data[r],r,n),n++},s.prototype.map=function(e,t){var n=r({},this._data),t=t||this;return this.each(function(r,i,s){n[i]=e.call(t,n[i],i,s)}),new this.constructor(n)},s.prototype.reduce=function(e,t,n){"number"!=typeof t&&(n=t,t=0);var r=t||0,n=n||this;return this.each(function(t,i,s){r+=e.call(n,t,i,s)}),r},s.prototype.mapReduce=function(e,t){var n=r({},this._data),i=new this.constructor(null,this.opts),s=new this.constructor(null,this.opts);return this.each(function(t,n){e(n,t,function(t,n){i.has(t)?i.get(t).push(n):i.set(t,[n])})}),i.each(function(e,n){var r=t(n,e);s.set(n,r)}),s},s.prototype.filter=function(e,t){var n=new this.constructor(null,this.opts),t=t||this;return this.each(function(r,i,s){e.call(t,r,i,s)&&n.set(i,r)}),n},s.prototype.sort=function(e){var t;e||(e="kasc"),"function"==typeof e?t=e:"string"==typeof e&&(e=e.toUpperCase(),i[e]&&(t=i[e]));var n=this.toArray().sort(t);return this.flush(!0),this.fromArray(n),this},s.prototype.clean=function(){var e=this.toArray();return this.flush(!0),this.fromArray(e),this},s.prototype.flush=function(){return delete this._data,this._data=Object.create(null),this},s.prototype.toArray=function(){var e=this,t=[];return this.each(function(n,r){if(e.has(r)){var i={key:r,value:n};t.push(i)}}),t},s.prototype.fromArray=function(e){for(var t=0;t<e.length;t++){var n=e[t].key,r=e[t].value;"undefined"!=typeof r&&this.set(n,r)}return this},n.exports})